language: python
env:
  global:
    secure: hLxJZaa8WVJVR2dInZNQNTsxV3Zm9uH+lLrHCctCLRxO+v/lWit/1SMRQa6fv8TlwNAuvMGrh8TYyZ8v1naiWieCPG25jo7ydOOaZpJRJDHy5jyq5NTjff4fgKw0s4O6EOqNHBOsUDdqagY2efB/UqJ4Jd5C87wHb9DfCKEgpq4=
services:
  - mongodb
python:
  - "2.7"
  - "3.4"
# command to install dependencies
install:
  - "pip install -r requirements.txt"
  - "pip install selenium pyvirtualdisplay coverage"
  - export DJANGO_SETTINGS_MODULE="echaloasuerte.settings.test"
  - "python manage.py syncdb --noinput"
# command to run tests
script:
  - nosetests tests/test_init.py tests -v
  - env
  - |
    if [[ $TRAVIS_PYTHON_VERSION == '2.7' && ! -z $BROWSERSTACK_KEY ]]; then
      wget http://www.browserstack.com/browserstack-local/BrowserStackLocal-linux-x64.zip
      unzip BrowserStackLocal-linux-x64.zip
      ./BrowserStackLocal $BROWSERSTACK_KEY > /dev/null &
      sleep 10
      nosetests func_test -v
    fi
